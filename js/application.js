(function(){var e,t;$(document).ready(function(){var n,o;return new e,new t,o=function(){var e;return e="Thanks for installing :)",document.getElementById("marketing-install").text=e,document.getElementById("hero-install").text=e,$("#hero-install, #marketing-install, #link-install").off("click"),trackInstall("Success")},n=function(){return trackInstall("Failure")},$("#hero-install, #marketing-install, #link-install").on("click",function(){return chrome.webstore.install("https://chrome.google.com/webstore/detail/nindoglnpjcjoaheijieagogboabafkc",o,n),!1})}),t=function(){function e(){this.readMore=document.getElementById("readMore"),window.onscroll=this.hideReadMore}return e.prototype.hideReadMore=function(){var e;return e=(1-.0035*window.pageYOffset).toFixed(2),e>-.1&&(this.readMore.style.opacity=e),window.pageYOffset>=window.innerHeight?(this.readMore.style.display="none",window.onscroll=null):void 0},e}(),e=function(){function e(){this.panel=$(".domflags-panel"),this.tree=$(".dom-tree"),this.treeFlags=this.getTreeFlags(),this.tooltipStr='<span class="tooltip">Add Domflag</span>',this.treeTooltip1=this.tree.find(".ft-tooltip.attr"),this.treeTooltip2=this.tree.find(".ft-tooltip.toggle"),this.panelTooltip=this.panel.find(".ft-tooltip.panel"),this.folds=[{start:18,end:21},{start:15,end:22},{start:14,end:23},{start:8,end:12},{start:7,end:24},{start:6,end:25},{start:4,end:26}],this.demoEvents()}return e.prototype.getTreeFlags=function(){return this.tree.find("span").filter(function(){return $(this).hasClass("s")&&$(this).parent().addClass("flaggable"),"domflag"===$(this).text()})},e.prototype.initTree=function(){return this.setupTreeNodes(),this.foldBlocks(this.folds),this.foldingEvents(),this.panelEvents(),this.tooltipEvents()},e.prototype.setupTreeNodes=function(){var e;return this.treeFlags.addClass("domflag-attr").parent().addClass("domflag-line"),e=this.tree.find("code > span"),e.find("span:last-of-type").after(this.tooltipStr).end().filter(".domflag-line").find(".tooltip").text("Remove Domflag"),$("#line-2").addClass("non-flaggable")},e.prototype.foldingEvents=function(){return $(".fold-true").on("click","a",function(e){return function(t){var n,o,a;return n=$(t.delegateTarget).parent(),n.hasClass("fold-block")?e.unfoldBlock(t.delegateTarget):(a=parseInt($(t.delegateTarget)[0].id.replace(/\D/g,"")),o=$.grep(e.folds,function(e){return e.start===a}),e.foldBlocks(o))}}(this))},e.prototype.unfoldBlock=function(e){var t;return t=$(e),t.removeClass("fold-parent").attr("style","").siblings().removeClass("fold-parent fold-inner").unwrap(),t.children("a").addClass("open")},e.prototype.foldBlocks=function(e){var t,n,o,a,l,s,i,r,d,f;for(f=[],r=0,d=e.length;d>r;r++)s=e[r],a=this.tree.find("#line-"+s.start),n=this.tree.find("#line-"+s.end),o=this.tree.find(a).nextUntil(n),t=this.tree.find("#line-"+(s.start-1)).nextUntil("#line-"+(s.end+1)),i=Math.ceil(a.find("span:first-of-type").offset().left-this.tree.offset().left),a.addClass("fold-true fold-parent").children("a").css("left",""+i+"px").removeClass("open"),n.addClass("fold-parent"),o.addClass("fold-inner"),l="<div class='fold-block' style='padding-left: "+i+"px' />",f.push(t.wrapAll(l));return f},e.prototype.demoEvents=function(){return $("#start-demo").on("click",function(e){return function(t){return $(t.currentTarget).addClass("hide").parent().addClass("show-download"),$(".devtools-toolbar, .devtools").addClass("open"),e.panel.addClass("open").find("li:first-child").addClass("demo"),e.initTree(),!1}}(this))},e.prototype.panelEvents=function(){return $(".devtools").on("transitionend webkitTransitionEnd",function(){return $(".browser").addClass("open"),$("#start-demo").addClass("hide"),$("#hero-install").addClass("show")}),this.panel.on("click","li",function(e){return function(t){var n,o,a,l;return l=e.panel.find("li").index(t.currentTarget),n=e.tree.find(".domflag-line").eq(l),a=$(".target"),e.panelTooltip.hide(),e.treeTooltip1.hide(),e.treeTooltip2.hide(),0===l&&t.currentTarget.classList.contains("demo")?(e.treeTooltip1.show(),$(t.currentTarget).next().addClass("demo")):1===l&&t.currentTarget.classList.contains("demo")&&(e.treeTooltip2.show(),e.tree.removeClass("hide-tooltips"),document.getElementById("readMore").classList.add("show")),e.panel.find("li").removeClass("active").end().find(t.currentTarget).addClass("active").removeClass("demo new"),e.tree.find("span").removeClass("selected"),n.addClass("selected"),1===n.parent(".fold-block").length&&(n.parentsUntil(e.tree).filter(".fold-block").children().unwrap(),n.parents().children().removeClass("fold-parent fold-inner").children("a").addClass("open")),o=n.offset().top,e.treeTop=e.tree.offset().top,e.treeBottom=e.treeTop+e.tree.height(),o>e.treeTop&&o<e.treeBottom?void 0:e.tree.scrollTo(".domflag-line.selected")}}(this))},e.prototype.tooltipEvents=function(){var e;return e=this.panel.outerWidth(),$(".tooltip").on("click",function(t){return function(n){var o,a,l,s,i,r,d;return o='<span class="na domflag-attr">domflag</span>',d=n.currentTarget,l=$(d).parent(),a=t.panel.find("li"),i=[],l.hasClass("domflag-line")?(s=l.index(".domflag-line"),$(d).text("Add Domflag"),a.eq(s).addClass("remove"),t.addSlideClasses("up",s),t.slidePanelItems("up",s),l.removeClass("domflag-line").find(".domflag-attr").remove()):($(d).text("Remove Domflag"),$(d).siblings().contents().filter(function(e){var t;return this.data.match(/\>/g)?void 0:(t=this.data,0===e&&(t=this.data.toUpperCase()+" "),i.push(t.replace(/</g," ").replace(/\= /,"=")))}),l.addClass("domflag-line").find(".s").last().after(o),s=l.index(".domflag-line"),r="<li class='flag new animate' style='width: "+e+"px'><span>"+i.join("")+"</span></li>",s<a.length?(a.eq(s).before(r),t.addSlideClasses("down",s)):t.panel.find("ol").append(r),t.slidePanelItems("down",s))}}(this))},e.prototype.addSlideClasses=function(e,t){return this.panel.find("li").eq(t).nextUntil().each(function(t){return $(this).addClass("delay-"+t+" move-"+e)})},e.prototype.slidePanelItems=function(e,t){var n,o,a,l,s;return s="webkitTransitionEnd transitionend",a="webkitAnimationEnd animationend",o=this.panel.find("li").eq(t),n=this.panel.find(".move-"+e),l=1,n.one(s,function(){return function(){return l===n.length&&(n.removeClass("move-"+e).removeClass(function(e,t){return(t.match(/\bdelay-\S+/g)||[]).join(" ")}),o.removeClass("animate"),"up"===e&&o.remove()),l++}}(this)),0===n.length?o.one(a,function(){return function(){return o.removeClass("animate"),"up"===e?o.remove():void 0}}(this)):void 0},e.prototype.trackEvent=function(e){return _gaq.push(["_trackEvent",e,"clicked"])},e}()}).call(this);