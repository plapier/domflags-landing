(function(){var e;$(document).ready(function(){var t,n;return new e,n=function(){var e;return e="Thanks for installing :)",document.getElementById("marketing-install").text=e,document.getElementById("hero-install").text=e,$("#hero-install, #marketing-install, #link-install").off("click"),trackInstall("Success")},t=function(){return trackInstall("Failure")},$("#hero-install, #marketing-install, #link-install").on("click",function(){return chrome.webstore.install("https://chrome.google.com/webstore/detail/nindoglnpjcjoaheijieagogboabafkc",n,t),!1})}),e=function(){function e(){this.panel=$(".domflags-panel"),this.tree=$(".dom-tree"),this.treeFlags=this.getTreeFlags(),this.tooltipStr='<span class="tooltip">Add Domflag</span>',this.folds=[{start:18,end:21},{start:15,end:22},{start:14,end:23},{start:8,end:12},{start:7,end:24},{start:6,end:25},{start:4,end:26}],this.demoEvents()}return e.prototype.getTreeFlags=function(){return this.tree.find("span").filter(function(){return $(this).hasClass("s")&&$(this).parent().addClass("flaggable"),"domflag"===$(this).text()})},e.prototype.initTree=function(){return this.setupTreeNodes(),this.foldBlocks(this.folds),this.foldingEvents(),this.panelEvents(),this.tooltipEvents()},e.prototype.setupTreeNodes=function(){var e;return this.treeFlags.addClass("domflag-attr").parent().addClass("domflag-line"),e=this.tree.find("code > span"),e.find("span:last-of-type").after(this.tooltipStr).end().filter(".domflag-line").find(".tooltip").text("Remove Domflag"),$("#line-2").addClass("non-flaggable")},e.prototype.foldingEvents=function(){return $(".fold-true").on("click","a",function(e){return function(t){var n,a,l;return n=$(t.delegateTarget).parent(),n.hasClass("fold-block")?e.unfoldBlock(t.delegateTarget):(l=parseInt($(t.delegateTarget)[0].id.replace(/\D/g,"")),a=$.grep(e.folds,function(e){return e.start===l}),e.foldBlocks(a))}}(this))},e.prototype.unfoldBlock=function(e){var t;return t=$(e),t.removeClass("fold-parent").attr("style","").siblings().removeClass("fold-parent fold-inner").unwrap(),t.children("a").addClass("open")},e.prototype.foldBlocks=function(e){var t,n,a,l,s,o,r,i,d,f;for(f=[],i=0,d=e.length;d>i;i++)o=e[i],l=this.tree.find("#line-"+o.start),n=this.tree.find("#line-"+o.end),a=this.tree.find(l).nextUntil(n),t=this.tree.find("#line-"+(o.start-1)).nextUntil("#line-"+(o.end+1)),r=Math.ceil(l.find("span:first-of-type").offset().left-this.tree.offset().left),l.addClass("fold-true fold-parent").children("a").css("left",""+r+"px").removeClass("open"),n.addClass("fold-parent"),a.addClass("fold-inner"),s="<div class='fold-block' style='padding-left: "+r+"px' />",f.push(t.wrapAll(s));return f},e.prototype.demoEvents=function(){return $("#start-demo").on("click",function(e){return function(t){return $(t.currentTarget).addClass("hide").parent().addClass("show-download"),$(".devtools-toolbar, .devtools").addClass("open"),e.panel.addClass("open").find("li:first-child").addClass("demo"),e.initTree(),!1}}(this))},e.prototype.panelEvents=function(){return $(".devtools").on("transitionend webkitTransitionEnd",function(){return $(".browser").addClass("open"),$("#start-demo").addClass("hide"),$("#hero-install").addClass("show")}),this.panel.on("click","li",function(e){return function(t){var n,a,l,s;return s=e.panel.find("li").index(t.currentTarget),n=e.tree.find(".domflag-line").eq(s),l=$(".target"),2>s?(l.addClass("pos-"+(s+1)),$(t.currentTarget).next().addClass("demo")):l.hide(),e.panel.find("li").removeClass("active").end().find(t.currentTarget).addClass("active").removeClass("demo new"),e.tree.find("span").removeClass("selected"),n.addClass("selected"),1===n.parent(".fold-block").length&&(n.parentsUntil(e.tree).filter(".fold-block").children().unwrap(),n.parents().children().removeClass("fold-parent fold-inner").children("a").addClass("open")),a=n.offset().top,e.treeTop=e.tree.offset().top,e.treeBottom=e.treeTop+e.tree.height(),a>e.treeTop&&a<e.treeBottom?void 0:e.tree.scrollTo(".domflag-line.selected")}}(this))},e.prototype.tooltipEvents=function(){var e;return e=this.panel.outerWidth(),$(".tooltip").on("click",function(t){return function(n){var a,l,s,o,r,i,d;return a='<span class="na domflag-attr">domflag</span>',d=n.currentTarget,s=$(d).parent(),l=t.panel.find("li"),r=[],s.hasClass("domflag-line")?(o=s.index(".domflag-line"),$(d).text("Add Domflag"),l.eq(o).addClass("remove"),t.addSlideClasses("up",o),t.slidePanelItems("up",o),s.removeClass("domflag-line").find(".domflag-attr").remove()):($(d).text("Remove Domflag"),$(d).siblings().contents().filter(function(e){var t;return this.data.match(/\>/g)?void 0:(t=this.data,0===e&&(t=this.data.toUpperCase()+" "),r.push(t.replace(/</g," ").replace(/\= /,"=")))}),s.addClass("domflag-line").find(".s").last().after(a),o=s.index(".domflag-line"),i="<li class='flag new animate' style='width: "+e+"px'><span>"+r.join("")+"</span></li>",o<l.length?(l.eq(o).before(i),t.addSlideClasses("down",o)):t.panel.find("ol").append(i),t.slidePanelItems("down",o))}}(this))},e.prototype.addSlideClasses=function(e,t){return this.panel.find("li").eq(t).nextUntil().each(function(t){return $(this).addClass("delay-"+t+" move-"+e)})},e.prototype.slidePanelItems=function(e,t){var n,a,l,s,o;return o="webkitTransitionEnd transitionend",l="webkitAnimationEnd animationend",a=this.panel.find("li").eq(t),n=this.panel.find(".move-"+e),s=1,n.one(o,function(){return function(){return s===n.length&&(n.removeClass("move-"+e).removeClass(function(e,t){return(t.match(/\bdelay-\S+/g)||[]).join(" ")}),a.removeClass("animate"),"up"===e&&a.remove()),s++}}(this)),0===n.length?a.one(l,function(){return function(){return a.removeClass("animate"),"up"===e?a.remove():void 0}}(this)):void 0},e.prototype.trackEvent=function(e){return _gaq.push(["_trackEvent",e,"clicked"])},e}()}).call(this);